<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>생일축하해</title>
    <!-- 파비콘생성 시작 -->
    <link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="./images/favicon.ico" type="image/x-icon">
    <!-- 파비콘생성 끝 -->
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/fullpage.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/slick.css">
    <link rel="stylesheet" href="./css/shape.css">
    <link rel="stylesheet" href="./css/sweetalert2.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <script type="text/javascript" src="./js/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="./js/slick.js"></script>
    <script type="text/javascript" src="./js/TweenMax.min.js"></script>
    <script type="text/javascript" src="./js/sweetalert2.min.js"></script>
    <script type="text/javascript" src="./js/jquery.cookie.js"></script>
    <!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-2SZ53S1CGV"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-2SZ53S1CGV');
	</script>
</head>
<body>
    <div class="header">
        <ul id="menu" >
            <li><a data-menuanchor="0rdPage" href="#0rdPage">#인트로</a></li>
            <li id="scrollPage"><a data-menuanchor="1rdPage" href="#1rdPage" >#사진</a></li>
            <li><a data-menuanchor="2rdPage" href="#2rdPage">#선물</a></li>
            <li><a data-menuanchor="3rdPage" href="#3rdPage">#편지</a></li>
        </ul>
    </div>
    <div id="fullpage">
        <div class="section" id="section0">
            <div class="bg"><img src="./images/bg_section00.jpg" alt=""></div>
            <div class="scroll-downs">
                <div class="mousey">
                    <div class="scroller"></div>
                </div>
            </div>
        </div>
        <div class="section" id="section1">
            <div class="shape"></div>
            <div class="section-wrap">
                <div class="title-wrap">
                    <p>추억 사진</p>
                </div>
                <div class="slick-wrap">
                    <div class="slide-item">
                        <img src="./images/img_slide13.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide1.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide14.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide4.jpg" alt="" class="left">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide5.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide11.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide12.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide10.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide6.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide7.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide9.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide8.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide2.jpg" alt="" class="left">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide3.jpg" alt="">
                    </div>
                    <div class="slide-item">
                        <img src="./images/img_slide15.jpg" alt="">
                    </div>
                </div>
                <div id="pager">
                    <div class="prev">
                        <span><img src="./images/icon_prev.png" alt="이전"></span>
                    </div>
                    <div class="img-number">
                        <span class="page"></span><span class="among">/</span><span class="total"></span>
                    </div>
                    <div class="next">
                      <span><img src="./images/icon_next.png" alt="다음"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="section" id="section2">
            <div class="shape"></div>
            <div class="section-wrap">
                <p class="title-wrap">생일은 역시 선물이죠!!</p>
                <p class="title-wrap">*기회는 단 1번!!</p>
                <div class="wrapper">
                    <div class="pin"></div>
                    <button type="button" class="btnStart">Start</button>
                    <div class="circleWrap">
                        <div class="rouleWrap">
                        </div>
                        <div class="dotWrap">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section" id="section3">
            <div class="letter-image">
                <p class="title-wrap">편지를 열어 확인해 주세요.</p>
                <div class="animated-mail">
                    <div class="back-fold"></div>
                    <div class="letter">
                        <div class="letter-border"></div>
                        <div class="letter-title"></div>
                        <div class="letter-context"></div>
                        <div class="letter-stamp">
                            <div class="letter-stamp-inner"></div>
                        </div>
                    </div>
                    <div class="top-fold"></div>
                    <div class="body"></div>
                    <div class="left-fold"></div>
                </div>
                <div class="shadow"></div>
            </div>
            <div class="letter-wrap">
                <div class="letter-box">
                    <div class="txt">
                        To. 지연아<br><br>
                        생일 진심으로 축하해!!<br>
                        너의 생일 날에 가장 먼저, 그리고 특별하게 축하를 전하고 싶었어.
                        우리의 첫 해외여행인 일본에서 너와 함께할 생각에 벌써부터 설레!<br>
                        일본에서 맛있는거 많이 먹고, 즐거운 시간 보내자~<br>
                        여행뿐만 아니라 일상에서도 작은 행복을 함께 나누고,
                        힘들 때 서로 의지할 수 있는 사이로 더 노력할게<br>
                        앞으로도 너가 자주 웃으며 나와 함께 행복한 하루하루를 보냈으면 좋겠어<br>
                        다시 한번 생일 진심으로 축하해!<br><br>
                        <span>From. 재범</span>
                        <button type="button"><img src="./images/btn_close.png" alt=""></button>
                    </div>
                </div>
            </div>
            
        </div>
        <!-- <div class="section" id="section4">
            <p class="title-wrap">축하해 주세요.</p>
            <div id="disqus_thread"></div>
            <script>
                (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = 'https://https-qja0326-github-io-jina.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            
        </div> -->
    </div>   
    <div class="footer">
        <div id="container">
            <div id="disc"></div>
            <audio id="sound" src="./audio/bg.mp3" allow="autoplay" loop></audio>
        </div>
    </div>
    <!-- s: 네비게이션-->
    <div id="nav" class="nav-wrap">
        <ul class="list-wrap">
            <li>
                <a data-menuanchor="0rdPage" href="#0rdPage" class="btn-item">
                    <img src="./images/icon_nav_home.png" alt="">
                </a>
            </li>
            <li>
                <a data-menuanchor="1rdPage" href="#1rdPage" class="btn-item">
                    <img src="./images/icon_nav_photo.png" alt="">
                </a>
            </li>
            <li>
                <a data-menuanchor="2rdPage" href="#2rdPage" class="btn-item">
                    <img src="./images/icon_nav_gift.png" alt="">
                </a>
            </li>
            <li>
                <a data-menuanchor="3rdPage" href="#3rdPage" class="btn-item">
                    <img src="./images/icon_nav_letter.png" alt="">
                </a>
            </li>
        </ul>
    </div>
    <!-- e: 네비게이션-->
    <div id="popup">
        <div id="popup-content">
            <h2>당신은 남지연입니까?</h2>
            <div class="btn-wrap">
                <button id="yesBtn">예</button>
                <button id="noBtn">아니오</button>
            </div>

            <div id="password-section">
                <input type="password" id="passwordInput" placeholder="비밀번호 입력">
                <button id="checkPasswordBtn">확인</button>
                <div id="error"></div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="./js/fullpage.js"></script>
    <script type="text/javascript" src="./js/roulette.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            // 쿠키 확인
            if($.cookie('roulette') == 1){
                $('.btnStart').hide();
                $('#section2 .title-wrap:first-child').text('이미..꽝을 뽑으 셨습니다.');
            }
            // 사진 슬릭 슬라이더
            var _totalPage = $('.slick-wrap .slide-item').length;
            $('.img-number .page').text(1);
            $('.img-number .total').text(_totalPage);
            $('.slick-wrap').slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                centerMode: true,
                variableWidth: true,
                focusOnSelect: true,
                prevArrow: $('.prev'),
                nextArrow: $('.next'),
                responsive: [
                    {
                    breakpoint: 768,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        centerMode: true,
                        variableWidth: false,
                        adaptiveHeight: true
                    }
                    }
                ]
            });
            $('.slick-wrap').on('afterChange', function(event, slick, currentSlide, nextSlide){
                var _num = (currentSlide ? currentSlide : 0) + 1;
                var _slidesToShow = slick.slickGetOption('slidesToShow');
                var _curPage = parseInt((_num-1)/_slidesToShow) + 1;
                var _totalPage =  parseInt((slick.slideCount-1)/_slidesToShow) + 1;
                $('.img-number .page').text(_curPage);
                $('.img-number .total').text(_totalPage);
            });

            // mouse-scroll-icon
            $(document).on("click", ".scroll-downs", function(){
                fullpage_api.moveTo('1rdPage');
                $('#container').addClass('active');
                $('#sound').get(0).play();
            });

            // 편지클릭 이벤트
            $('.letter-image').click(function(){
                setTimeout(function(){
                    $('.letter-image').fadeOut(function(){
                        $('.letter-wrap').fadeIn();
                    });

                },500);
            });
            $('.letter-box .txt button').click(function(){
                $('.letter-wrap').fadeOut(function(){
                    $('.letter-image').fadeIn();
                });
            });

            // 오디오클릭
            $('#container').click(function(){
                if ($(this).hasClass('active')) {
                    $(this).removeClass('active');
                    $('#sound').get(0).pause();
                } else {
                    $(this).addClass('active');
                    $('#sound').get(0).play();
                }
            });

            const correctPassword = "0719"; // 원하는 비밀번호 설정
            // 쿠키가 이미 있으면 팝업 숨기고 본문 보이기
            if ($.cookie('namjieun') === 'true') {
                $('#popup').hide();
                $('#siteContent').show();
            }

            // '남지연 아님' 버튼 클릭 → 다른 사이트로 이동
            $('#noBtn').on('click', function() {
                window.location.href = "./error.html"; // 이동할 주소로 변경
            });

            // '남지연' 버튼 클릭 → 비밀번호 입력창 표시
            $('#yesBtn').on('click', function() {
                $('#password-section').slideDown();
            });

            // 비밀번호 확인
            $('#checkPasswordBtn').on('click', function() {
                const input = $('#passwordInput').val();
                if (input === correctPassword) {
                    $.cookie('namjieun', 'true', { expires: 1 });
                    $('#popup').fadeOut();
                    $('#siteContent').fadeIn();
                } else {
                    $('#error').text('비밀번호가 틀렸습니다.');
                }
            });
        });



        $(window).load(function(){
            // 배경도형
            var density = 10;
            var shape = $(".shape"),
                i, particle;
            for (i = 0; i < density; i++) {
                if(i%2){
                    $("<div />", {id:"particle"+i}).addClass("layer1").appendTo(shape);
                }else{
                    $("<div />", {id:"particle"+i}).addClass("layer2").appendTo(shape);
                }
            }
            var mouseX, mouseY, time1 = 1,time2 = 2, gap = 10;
            $('body').on('mousemove',randomMove);
            function randomMove(e){
                if($(window).width() > 768){
                    mouseX = e.pageX / gap;
                    mouseY = e.pageY / gap;
                    TweenLite.to(".layer1", time1, {x:mouseX,y:-mouseY,ease: Power4.easeOut}),
                    TweenLite.to(".layer2", time2, {x:-mouseX,y:mouseY,ease: Power4.easeOut});
                }
            }

            $(window).scroll(function () {
                if($(window).width() < 768){
                    TweenLite.to(".layer1", time1, {x:mouseX,y:-($(this).scrollTop() / 3),ease: Power4.easeOut});
                    TweenLite.to(".layer2", time2, {x:-($(this).scrollTop() / 3),y:mouseY,ease: Power4.easeOut});

                }
            });
        });

        function popup_roulette(){
            Swal.fire({
                icon: 'warning',
                title: '꽝!',
                text: '아쉽지만 내년에 다시 도전해 주세요.'
            });
        };

        // 풀페이지 스크롤
        var myFullpage = new fullpage('#fullpage', {
            // sectionsColor: ['#1bbc9b', '#4BBFC3', '#7BAABE', 'whitesmoke', '#ccddff'],
            // anchors: ['firstPage', 'secondPage', '3rdPage'],
            navigation:true,
            navigationTooltips: ['#인트로', '#사진', '#선물','#편지'],
            showActiveTooltip: true,
            // menu: '#menu'
            // responsiveWidth: 768,
            anchors: ['0rdPage', '1rdPage', '2rdPage', '3rdPage'],
            menu: '#nav'
        });
    </script>
</body>
</html>
